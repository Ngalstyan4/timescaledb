\c single :ROLE_SUPERUSER
CREATE SCHEMA IF NOT EXISTS "customSchema" AUTHORIZATION :ROLE_DEFAULT_PERM_USER;
\c single :ROLE_DEFAULT_PERM_USER
CREATE TABLE test1 (time timestamp, temp float8);
CREATE TABLE test2 (time timestamp NOT NULL, temp float8);
-- dimension sizes still not handled TODO::
CREATE TABLE test3 (time timestamp NOT NULL, temp float8 NOT NULL, temp2 int[], temp3 int[][], temp4 int [][][], temp5 int[4][4]);
CREATE TABLE test4 (time timestamp, device INT PRIMARY KEY, temp float8);
CREATE TABLE test5 (time timestamp, name CHAR(30) NOT NULL, vname VARCHAR );
CREATE TABLE test6 (time TIMESTAMP NOT NULL,
      num INT NOT NULL DEFAULT 48,
      n INT DEFAULT 455454,
      tt TEXT,
      tt_col TEXT COLLATE "es_ES",
      tt_def_col TEXT DEFAULT ('ีก' COLLATE "hy_AM")
);
CREATE TABLE test7 (time_start TIMESTAMP NOT NULL,
                    time_end   TIMESTAMP NOT NULL CHECK (time_end >= time_start),
                    val_min    INT CHECK (val_min < val_max),
                    val_max    INT CHECK (val_max > val_min)
);
-- CREATE TABLE "customSchema".test6 (time timestamp, temp float8);
SELECT _timescaledb_internal.deparse_test('public.test1');
INFO:  table reloid 16605
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  *******FINAL QUERY*****: 

 CREATE TABLE test1
 (
    time timestamp,
    temp float8
)  
 ***************************
    deparse_test     
---------------------
 CREATE TABLE test1 +
  (                 +
     time timestamp,+
     temp float8    +
 ) 
(1 row)

SELECT _timescaledb_internal.deparse_test('public.test2');
INFO:  table reloid 16608
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  *******FINAL QUERY*****: 

 CREATE TABLE test2
 (
    time timestamp NOT NULL,
    temp float8
)  
 ***************************
         deparse_test         
------------------------------
 CREATE TABLE test2          +
  (                          +
     time timestamp NOT NULL,+
     temp float8             +
 ) 
(1 row)

SELECT _timescaledb_internal.deparse_test('public.test3');
INFO:  table reloid 16611
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  *******FINAL QUERY*****: 

 CREATE TABLE test3
 (
    time timestamp NOT NULL,
    temp float8 NOT NULL,
    temp2 _int4,
    temp3 _int4,
    temp4 _int4,
    temp5 _int4
)  
 ***************************
         deparse_test         
------------------------------
 CREATE TABLE test3          +
  (                          +
     time timestamp NOT NULL,+
     temp float8 NOT NULL,   +
     temp2 _int4,            +
     temp3 _int4,            +
     temp4 _int4,            +
     temp5 _int4             +
 ) 
(1 row)

SELECT _timescaledb_internal.deparse_test('public.test4'); -- Q:: TODO how to get primary key info? is this in constraints or in pg_type?
INFO:  table reloid 16617
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  *******FINAL QUERY*****: 

 CREATE TABLE test4
 (
    time timestamp,
    device int4 NOT NULL PRIMARY KEY,
    temp float8
)  
 ***************************
             deparse_test              
---------------------------------------
 CREATE TABLE test4                   +
  (                                   +
     time timestamp,                  +
     device int4 NOT NULL PRIMARY KEY,+
     temp float8                      +
 ) 
(1 row)

SELECT _timescaledb_internal.deparse_test('public.test5');
INFO:  table reloid 16622
INFO:  ->>>>> -1
INFO:  ->>>>> 34
INFO:  ->>>>> -1
INFO:  *******FINAL QUERY*****: 

 CREATE TABLE test5
 (
    time timestamp,
    name bpchar NOT NULL,
    vname varchar
)  
 ***************************
       deparse_test        
---------------------------
 CREATE TABLE test5       +
  (                       +
     time timestamp,      +
     name bpchar NOT NULL,+
     vname varchar        +
 ) 
(1 row)

SELECT _timescaledb_internal.deparse_test('public.test6');
INFO:  table reloid 16628
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  ->>>>> -1
INFO:  *******FINAL QUERY*****: 

 CREATE TABLE test6
 (
    time timestamp NOT NULL,
    num int4 NOT NULL DEFAULT 48,
    n int4 DEFAULT 455454,
    tt text,
    tt_col text COLLATE "es_ES",
    tt_def_col text DEFAULT ('ีก'::text COLLATE "hy_AM")
)  
 ***************************
                      deparse_test                       
---------------------------------------------------------
 CREATE TABLE test6                                     +
  (                                                     +
     time timestamp NOT NULL,                           +
     num int4 NOT NULL DEFAULT 48,                      +
     n int4 DEFAULT 455454,                             +
     tt text,                                           +
     tt_col text COLLATE "es_ES",                       +
     tt_def_col text DEFAULT ('ีก'::text COLLATE "hy_AM")+
 ) 
(1 row)

-- SELECT _timescaledb_internal.deparse_test('customSchema.test6'); -- this fails for some reason TODO
